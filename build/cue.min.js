(function(e){var E=Math.PI,P=Math.floor,R=Math.abs,y=Math.min,C=Math.max;function t(e,n){if(N(n)){for(let r,s,a=0;a<n.length;a++)if(r=n[a]){if(r===e||r[ge]===e)return{parent:n,ownPropertyName:a};if("object"==typeof r&&(s=t(e,r)))return s}}else{let r,i,s;for(r in n)if(i=n[r]){if(i===e||i[ge]===e)return{parent:n,ownPropertyName:r};if("object"==typeof i&&(s=t(e,i)))return s}}}function n(e,t){t===$?(r(e),s(e)):t===K&&a(e)}function r(e){if(e.superDerivatives.length)for(let t,n=0;n<e.superDerivatives.length;n++)t=e.superDerivatives[n],t.stopPropagation=!1,t.superDerivatives.length&&r(t)}function s(e,t=!0){if(e.stopPropagation=t,e.derivatives.length)for(let t,n=0;n<e.derivatives.length;n++)t=e.derivatives[n],t.observers.length&&(e.stopPropagation=!1,s(t))}function a(e,t=!1){e.stopPropagation=t;for(let n,r=0;r<e.superDerivatives.length;r++)n=e.superDerivatives[r],n.observers.length?n.stopPropagation=!0:a(n)}function o(e,t,n,r,s,a,d){let p,u,c;if(s)for(p=0;p<s.length;p++)c=s[p],-1===me.indexOf(c)&&me.push(c,new Pe(e,t,n,r));if(a&&(u=a.length)&&!1===d){for(p=0;p<u;p++)a[p].updateProperty(t,n);let e;for(p=0;p<u;p++)c=a[p],e=c.value,c.hasChanged&&o("change",c.ownPropertyName,e,void 0,c.observers,c.derivatives,c.stopPropagation)}}function d(e,t,n,r,s,a,o){let d,l;if(s)for(d=0;d<s.length;d++)l=s[d],-1===me.indexOf(l)&&me.push(l,new Pe(e,t,n,r));if(a&&!1===o)for(d=0;d<a.length;d++)a[d].updateProperty(t,n)}function l(){W=!0;const e=me.length;for(let t=0;t<e;t+=3)me[t].react(me[t+1],me[t+2]);me.splice(0,e),W=!1}function p(e){const t=e(he);if(!t||t.constructor!==Object)throw new TypeError(`Can't create State Module because the CONFIGuration function does not return a plain object.`);if(!t.props||t.props.constructor!==Object)throw new TypeError(`State Module requires "props" pojo containing default and optional computed properties.`);const n={defaults:{},computed:{},initialize:void 0,actions:{},static:!0===t.static,imports:t.imports};let r,i;for(r in t.props)i=t.props[r],"function"==typeof i?n.computed[r]=i:n.defaults[r]=i;for(r in t)if(i=t[r],"initialize"!==r)"function"==typeof i&&(n.actions[r]=i);else if("function"==typeof i)n.initialize=i;else throw new TypeError(`"initialize" is a reserved word for Cue State Modules and must be a function but is of type ${typeof i}`);return n}function u(e){if(N(e)){const t=[];for(let n,r=0;r<e.length;r++)n=e[r],t[r]="object"==typeof n?u(n):n;return t}if(e&&e.constructor===Object){const t={};let n,r;for(n in e)r=e[n],t[n]="object"==typeof r?u(r):r;return t}}function c(e,t){let n,r,i,s,a,o,d,l;for(n in e){for(i in o=`${n}-${Ae()}`,d=we.insertRule(`.${o} {}`,we.cssRules.length),l=we.cssRules[d].style,r=e[n],r)(":"===i[0]||" "===i[0])&&(s=we.insertRule(`.${o}${i} {}`,we.cssRules.length),a=we.cssRules[s].style,Object.assign(a,r[i]),delete r[i]);Object.assign(l,r),e[n]=o,t&&_(n,o,t)}return e}function _(e,t,n){n.classList.replace(e,t);for(let r=0;r<n.children.length;r++)_(e,t,n.children[r])}function g(e){let t,n,r,i,s,a,o,d;for(t in e){for(a in n=`${t}-${Ae()}`,r=we.insertRule(`@keyframes ${n} {}`,we.cssRules.length),i=we.cssRules[r],s=e[t],s)i.appendRule(`${a}% {}`),o=i.cssRules.length-1,d=i.cssRules[o].style,Object.assign(d,s[a]);e[t]=n}return e}function v(e,t,n,r,s){let o,d,l,p=0,u=0,c=!0,_=t.length-1,g=n.length-1,v=parent.firstChild,m=v,h=parent.lastChild,E=h;outer:for(;c;){c=!1;let e;for(o=t[p],d=n[u];o===d;){if(s(v,d),p++,u++,m=v=v.nextSibling,_<p||g<u)break outer;o=t[p],d=n[u]}for(o=t[_],d=n[g];o===d;){if(s(h,d),_--,g--,l=h,E=h=h.previousSibling,_<p||g<u)break outer;o=t[_],d=n[g]}for(o=t[_],d=n[u];o===d;){if(c=!0,s(h,d),e=h.previousSibling,parent.insertBefore(h,m),E=h=e,u++,_--,_<p||g<u)break outer;o=t[_],d=n[u]}for(o=t[p],d=n[g];o===d;){if(c=!0,s(v,d),e=v.nextSibling,parent.insertBefore(v,l),l=E=v,v=e,p++,g--,_<p||g<u)break outer;o=t[p],d=n[g]}}if(g<u){if(p<=_)for(let e;p<=_;)0===_?parent.removeChild(h):(e=h.previousSibling,parent.removeChild(h),h=e),_--;return}if(_<p){if(u<=g)for(;u<=g;)l?parent.insertBefore(r(n[u]),l):parent.appendChild(r(n[u])),u++;return}const P=Array(g+1-u),R=new Map;let y;for(y=u;y<=g;y++)P[y]=-1,R.set(n[y],y);let C=0,O=[];for(y=p;y<=_;y++)R.has(t[y])?(P[R.get(t[y])]=y,C++):O.push(y);if(0==C){for(parent.textContent="",y=u;y<=g;y++)parent.appendChild(r(n[y]));return}const S=f(P,u),I=[];let T=v;for(y=p;y<=_;y++)I[y]=T,T=T.nextSibling;for(y=0;y<O.length;y++)parent.removeChild(I[O[y]]);let D,A=S.length-1;for(y=g;y>=u;y--)S[A]===y?(l=I[P[S[A]]],s(l,n[y]),A--):(-1===P[y]?D=r(n[y]):(D=I[P[y]],s(D,n[y])),parent.insertBefore(D,l),l=D)}function f(e,t){const r=[],s=[],a=Array(e.length);let o,d,p,u=-1;for(o=t;o<e.length;o++){if(d=e[o],0>d)continue;let t,n=-1,i=r.length;if(0<i&&r[i-1]<=d)p=i-1;else{for(;1<i-n;)t=x((n+i)/2),r[t]>d?i=t:n=t;p=n}-1!==p&&(a[o]=s[p]),p===u?(u++,r[u]=d,s[u]=o):d<r[p+1]&&(r[p+1]=d,s[p+1]=o)}for(o=s[u];0<=u;o=a[o],u--)r[u]=o;return r}function m(e){const t="function"==typeof e?e(be):e;if(!t||t.constructor!==Object)throw new TypeError(`Can't create UI Module because the configuration function did not return a plain object.`);if(!t.template)throw new TypeError(`UI Module requires "template" property that specifies a DOM Element. // expect(template).toEqual(HTMLString || Selector || DOMNode).`);const n=h(t.template);return{template:n,imports:t.imports||null,styles:t.styles?c(t.styles,n):null,keyframes:t.keyframes?g(t.keyframes):null,initialize:t.initialize||null,didMount:t.didMount||b,didUpdate:t.didUpdate||b,willUnmount:t.willUnmount||b}}function h(e){if("string"==typeof e)switch(e=e.trim(),e[0]){case"<":return document.createRange().createContextualFragment(e).firstChild;case".":return document.getElementsByClassName(e.substring(1))[0];case"#":return document.getElementById(e.substring(1));case"[":return document.querySelectorAll(e)[0];default:return document.createTextNode(e);}else if(e instanceof Element)return e}console.log(`%cðŸ‘ Cue.js - Version ${.8}`,"color: rgb(0, 140, 255)");const O=e.Cue=Object.create(null),b=()=>{},S=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]),I=Object.assign,T=Object.create,D=Object.defineProperty,A=Object.defineProperties,w=Object.keys,N=Array.isArray,L=Math.random,V=Math.pow,B=Math.round,x=P,j=Reflect.set,U=Reflect.get,k=Reflect.apply,z=Reflect.deleteProperty,M=O.prototype=T(null);I(M,{clamp(e,t,n){return C(e,y(t,n))},lerp(e,t,n){return(1-n)*e+n*t},smoothStep(e,t,n){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))},interpolateLinear(e,t,n,r,i){return n+(i-e)*(r-n)/(t-e)},createLinearInterpolator(e,t,n,r){return arguments.length?0===e&&0<n?e=>e*(r-n)/t+n:0===n&&0<e?n=>(n-e)*r/(t-e):0===e&&0===n?e=>e*r/r:this.interpolateLinear:this.interpolateLinear},convertBits(e,t,n){return 32>e?32>t?n*V(2,t)/V(2,e):n/V(2,e):32>t?B(n*V(2,t)):n},randomIntegerBetween(e,t){return x(L()*(t-e+1)+e)},randomFloatBetween(e,t){return L()*(t-e)+e},isOddNumber(e){return 1&e},isEvenNumber(e){return!(1&e)},degreesToRadians(e){return e*(E/180)},radiansToDegrees(e){return e*(180/E)}}),I(M,{createUID(){let e=0;return(this.createUID=function(){let t,r="";for(const n=e.toString(26).split("");t=n.shift();)r+="abcdefghijklmnopqrstuvwxyz"[parseInt(t,26)];return e++,r}).call(this)},camelCase(e){const t=document.createElement("div");return t.setAttribute(`data-${e}`,""),Object.keys(t.dataset)[0]},dashedCase(e){const t=document.createElement("div");return t.dataset[e]="",t.attributes[0].name.substr(5)}}),I(M,{deepClone(e){if(N(e)){const t=[];for(let n,r=0;r<e.length;r++)n=e[r],t[r]="object"==typeof n?this.deepClone(n):n;return t}if(e.constructor===Object){const t={};let n,r;for(n in e)r=e[n],t[n]="object"==typeof r?this.deepClone(r):r;return t}},shallowClone(e){return N(e)?e.slice():e.constructor===Object?Object.assign({},e):void 0},deepCompare(e,t){if(e===t)return!0;else{const r=typeof e;if(r==typeof t){const i=Array.isArray(t);if(Array.isArray(e)&&i){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!this.deepCompare(e[n],t[n]))return!1;return!0}if("object"==r&&!i){for(var n in e)if(!this.deepCompare(e[n],t[n]))return!1;return!0}return!1}return!1}},shallowCompare(e,t){if(e.constructor===Object&&t.constructor===Object){const n=w(e),r=w(t);if(n.length!==r.length)return!1;for(let s,a=0;a<n.length;a++)if(s=n[a],-1===r.indexOf(s)||e[s]!==t[s])return!1;return!0}if(N(e)&&N(t)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t},mergeObjects(...e){for(let t=0,n=e.length,r="";++t<n;)for(r in e[t])e[t].hasOwnProperty(r)&&(e[0][r]=e[t][r]);return e[0]}}),I(M,{flattenArray(e){return e.reduce((e,t)=>e.concat(Array.isArray(t)?this.flattenArray(t):t),[])},insertAtEvery(e,t,n){n=C(n,1);const r=e.length,i=P(r+r/n),s=P(i/n);let a=[];for(let o=0;o<s;o++)if(a.length+n<i){for(let t=0;t<n;t++)a.push(e[t+o*n]);a.push(t)}else{const t=C(i-a.length,0);a=a.concat(e.slice(r-t,r+1));break}return e=a,this},removeAtEvery(e,t){for(let n=P(e.length/t);n--;)e.splice((n+1)*t-1,1);return this},removeRangeFromArray(e,t,n){return e.splice(t,n-t),this},mergeArrays(e,t,n=e.length){n=y(C(n,0),e.length);const r=t.length,s=e.length-n,a=Array(s);let o;for(o=0;o<s;o++)a[o]=e[o+n];for(o=0;o<r;o++)e[o+n]=t[o];for(o=0;o<s;o++)e[o+r+n]=a[o];return this},scaleArray(e,t){var n=Math.ceil;const r=e.length-1,s=t-1;let o=0,l=0,p=0,u=0;for(let a=1;a<s;a++)o=a*(r/s),l=P(o),p=n(o),u=o-l,e[a]=e[l]+(e[p]-e[l])*u;return e[s]=e[r],this},closestValueInArray(e,t){return e.reduce((e,n)=>R(n-t)<R(e-t)?n:e)},closestSmallestValueInArray(e,t){const n=this.closestValueInArray(e,t);return t>=n?n:e[e.indexOf(n)-1]},closestLargestValueInArray(e,t){const n=this.closestValueInArray(e,t);return t<=n?n:e[e.indexOf(n)+1]},largestValueInArray(e){let t=-Infinity;for(let n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return t===-Infinity?void 0:t},smallestValueInArray(e){let t=1/0;for(let n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return t===1/0?void 0:t}}),I(M,{throttle(e,t=250,n=null){let r=0,i=0;return function(...s){r=Date.now(),r>i+t&&(e.apply(n,s),i=r)}},defer(e,t=250,n=null){let r=null;return function(...i){clearTimeout(r),r=setTimeout(()=>{e.apply(n,i),r=null},t)}},createTaskWorker(e){const t="function"==typeof e?e:e.process?e.process:void 0,n=new Worker(window.URL.createObjectURL(new Blob([`(function() { onmessage = ${t.toString()} })()`],{type:"application/javascript"})));return e.response&&(n.onmessage=e.response),e.onError&&(n.onerror=e.onError),{process:n.postMessage.bind(n),terminate:n.terminate.bind(n),set response(e){n.onmessage=e},get response(){return n.onmessage},set onError(e){n.onerror=e},get onError(){return n.onerror}}}});{const e=new Map,t=`Can't add listener because the provided arguments are invalid.`;let n,r,i,s,a,o=[];const d=(t,n,r,i)=>{const s={handler:n,scope:r,once:i};e.has(t)?e.get(t).push(s):e.set(t,[s])},l=(e,t,i)=>{for(n in e)if(r=e[n],"function"==typeof r)d(n,r,t,i);else throw new TypeError(`Can't add listener because handler for "${n}" is not a function but of type ${typeof r}`)};A(O,{on:{value:function(e,n,r){if(e&&e.constructor===Object)i="object"==typeof n?n:null,l(e,i,!1);else if("string"==typeof e&&"function"==typeof n)i="object"==typeof r?r:null,d(e,n,i,!1);else throw new TypeError(t)}},once:{value:function(e,n,r){if(e&&e.constructor===Object)i="object"==typeof n?n:null,l(e,i,!0);else if("string"==typeof e&&"function"==typeof n)i="object"==typeof r?r:null,d(e,n,i,!0);else throw new TypeError(t)}},off:{value:function(t){e.delete(t)}},trigger:{value:function(t,n){if(s=e.get(t)){for(let e=0;e<s.length;e++)a=s[e],a.handler.call(a.scope,n),a.once&&o.push(a);o.length&&(e.set(t,s.filter(e=>-1===o.indexOf(e))),o.length=0),s=null}}}})}const Y=new Map,X=e=>"string"==typeof e&&2<e.length&&-1!==e.indexOf("-"),F=e=>e.split("-"),G=(e,t)=>e.didInstall?(console.warn(`"${e.name}" has already been installed. Installation ignored.`),e.interface):(e.installer.call(e.interface,M,t),e.didInstall=!0,e.interface.onDidInstall(),e.interface);A(O,{Plugin:{value:function(e,t,n){if(!X(e))throw new Error(`Plugin must be defined with a namespaced-name (vendor-plugin) of type string as the first argument.`);const[r,i]=F(e);if(!t&&!n){const e=Y.get(r);if(e){const t=e.get(i);if(t)return t}}else{if("function"!=typeof t)throw new Error(`Plugin must be defined with an installable function as the second argument.`);const s=Y.get(r)||Y.set(r,new Map).get(r);if(s.has(i))return console.warn(`A plugin with name "${i}" has already been registered under "${r}". Skipping installation...`),s.get(i).interface;const a={installer:t,didInstall:!1,name:e,interface:{name:e,onDidInstall(){}}};return s.set(i,a),n?G(a):a.interface}}},use:{value:function(e,t){if(!X(e))throw new Error(`pluginName must be a namespaced-string (vendor-plugin).`);const[n,r]=F(e),i=Y.get(n);if(i){const e=i.get(r);if(e)return G(e,t)}throw new Error(`No Plugin registered under "${e}".`)}}});const q=new Map;let W=!1,J=!1,Q=null;const H=M.shallowClone,Z=M.shallowCompare,$=-1,K=1,ee=Symbol("UniqueID"),te=Symbol("IsValueObservable"),ne=Symbol("IsValueDerived"),re=Symbol("ReactorTarget"),ie=Symbol("DisposeReactor"),se=Symbol("Reactors"),ae=Symbol("ObserversOfProperties"),oe=Symbol("DerivativesOfProperties"),de=Symbol("DerivedProperties"),le=Symbol("ParentModel"),pe=Symbol("OwnPropertyName"),ue=Symbol("SetParent"),ce=Symbol("GetOwnCue"),_e=Symbol("SetParentCue"),ge=Symbol("SourceData"),ve=Symbol("ProxyModel"),fe={ROOT:void 0},me=[],he=T(M,{import:{value:function(e){const t=q.get(e);if(!t)throw new ReferenceError(`Can't import State Module because nothing is registered under "${e}".`);return t}}});class Ee{static create(e,t,n){return e[te]?e:e[ve]||new this(e,t,n)}constructor(e,n,r){const i=this.uid=Symbol(),s=this.reactors=new Set,a=this.observersOf=new Map,l=this.derivativesOf=new Map,p=this.derivedProperties=new Map;if(this.fnCache=new Map,this.valueCache=new Map,n)this.parent=n,this.ownPropertyName=r;else{const{parent:n,ownPropertyName:r}=t(e,fe);this.parent=n,this.ownPropertyName=r}this.attemptCue=(e,t,n,r)=>{const i=this.derivativesOf.get(t),s=this.observersOf.get(t);return!!(i||s)&&(J?d(e,t,n,r,s,i,!1):o(e,t,n,r,s,i,!1),!0)},this.attemptCueParent=this.parent[ce],this.metaProperties=new Map([[te,!0],[ge,e],[le,this.parent],[ae,a],[oe,l],[de,p],[pe,this.ownPropertyName],[se,s],[ce,this.attemptCue],[_e,e=>this.attemptCueParent=e],[ue,e=>this.parent=e],[ee,i]]),this.data=e,this.model=new Proxy(e,this),this.setupDerivatives();let u,c;for(u in e)(c=e[u])&&c[te]&&(c[ue](this.model),c[_e](this.attemptCue));return Object.defineProperty(e,ve,{value:this.model,configurable:!0}),(this.parent[ge]||this.parent)[this.ownPropertyName]=this.model,this.model}get(e,t){if(null!==Q){const n=U(e,t);"object"!=typeof n||null===n||n[te]||n[ne]||this.constructor.create(n,e,t),this.derivativesOf.has(t)?this.derivativesOf.get(t).push(Q):this.derivativesOf.set(t,[Q]),-1===Q.dependencies.indexOf(t)&&Q.dependencies.push(t);const r=this.derivedProperties.get(t);return void(r&&(-1===r.derivatives.indexOf(Q)&&r.derivatives.push(Q),-1===Q.superDerivatives.indexOf(r)&&Q.superDerivatives.push(r)))}const n=this.metaProperties.get(t);if(n)return n;const r=U(e,t);return"function"==typeof r?this.fnCache.get(t)||this.fnCache.set(t,(...n)=>{if(!S.has(t)||!this.attemptCueParent)return k(r,e,n);const i=H(e),s=k(r,e,n);return Z(i,e)||!this.attemptCueParent("methodCall",this.ownPropertyName,e,{method:t,arguments:n,result:s})||J||l(),s}).get(t):r}set(e,t,n){if(this.derivedProperties.has(t))throw new Error(`Can not set property "${t}" because it is derived. Derivatives have to be explicitly deleted before they can be redefined.`);if(!W&&n!==this.valueCache.get(t)){if("function"==typeof n){const e=this.addDerivative(t);e.connect(),e.refreshCache(),n=e.value}else j(e,t,n),this.valueCache.set(t,n?n[ge]||n:n);if(this.attemptCue("set",t,n,void 0))return"object"!=typeof n||null===n||n[te]||n[ne]||this.constructor.create(n,e,t),this.attemptCueParent&&this.attemptCueParent("setChild",this.ownPropertyName,e,{childProperty:t,mutationType:"set"}),J||l(),!0;if(this.attemptCueParent&&this.attemptCueParent("setChild",this.ownPropertyName,e,{childProperty:t,mutationType:"set"}))return J||l(),!0}}deleteProperty(e,t){if(!W)return this.derivedProperties.has(t)&&this.derivedProperties.get(t).dispose(!0),z(e,t),this.valueCache.delete(t),this.attemptCue("delete",t,void 0,void 0),this.attemptCueParent&&this.attemptCueParent("deleteChild",this.ownPropertyName,e,{childProperty:t,mutationType:"delete"}),J||l(),!0}setupDerivatives(){const e=Object.keys(this.data),t=e.length;let n,r,s;for(n=0;n<e.length;n++)s=e[n],this.data.hasOwnProperty(s)&&"function"==typeof this.data[s]&&this.addDerivative(s);if(0===this.derivedProperties.size)return!1;this.derivedProperties.forEach(e=>e.connect());let a,o,d;const l=[];search:for(;l.length<t;)for(n=0;n<t;n++){if(s=e[n],o=this.derivedProperties.get(s),o&&!1===o.readyToInstall){for(r=0;r<o.dependencies.length;r++)if(a=o.dependencies[r],d=this.derivedProperties.get(a),d&&!1===d.readyToInstall){o.readyToInstall=!1;break}else o.readyToInstall=!0;o.readyToInstall&&(o.refreshCache(this.data),l.push(s))}else-1===l.indexOf(s)&&l.push(s);if(l.length===t)break search}return!0}addDerivative(e){const t=new ye(this.model,e,this.data[e]);return this.derivedProperties.set(e,t),Object.defineProperty(this.data,e,{get(){return t.value},configurable:!0,enumerable:!1}),t}dispose(){let e,t,n;for(e in this.data)(t=this.data[e])&&t[te]&&(t[ue](this.data),t[_e](void 0)),(n=this.derivedProperties.get(e))&&Object.defineProperty(this.data,e,{value:n.computation,writable:!0,configurable:!0,enumerable:!0});return(this.parent[ge]||this.parent)[this.ownPropertyName]=this.data,delete this.data[ve],this.attemptCueParent=void 0,this.model=void 0,this.data=void 0,this.reactors.clear(),this.observersOf.clear(),this.derivativesOf.clear(),this.derivedProperties.clear(),this.fnCache.clear(),this.valueCache.clear(),this.metaProperties.clear(),!0}}class Pe{constructor(e,t,n,r){this.type=e,this.property=t,this.value=n,this.mutationDetails=r}}class Re{constructor(e,t){this.reactor=e,this.reactionTarget=e.target,this.reaction=t}react(e){this.reaction.call(this.reactionTarget,e)}}class ye{constructor(e,t,n){this[ne]=!0,this.parent=e,this.ownPropertyName=t,this.computation=n,this.dependencies=[],this.derivatives=[],this.superDerivatives=[],this.dependencyValues=Object.create(null),this.observers=[],this.stopPropagation=!1,this.intermediate=void 0,this._value=void 0,this.readyToInstall=!1,this.needsUpdate=!1,this.hasChanged=!1}get value(){return this.needsUpdate&&(this.intermediate=this.computation.call(null,this.dependencyValues),this._value&&"object"==typeof this._value&&this.intermediate&&"object"==typeof this.intermediate?Z(this._value,this.intermediate)?this.hasChanged=!1:(this._value=this.intermediate,this.hasChanged=!0):this.intermediate===this._value?this.hasChanged=!1:(this._value=this.intermediate,this.hasChanged=!0),this.needsUpdate=!1),this._value}updateProperty(e,t){this.dependencyValues[e]=t,this.needsUpdate=!0}connect(){Q=this;try{this.computation.call(this.parent,this.parent)}catch(t){}Q=null}refreshCache(e){for(let t,n=0;n<this.dependencies.length;n++)t=this.dependencies[n],this.dependencyValues[t]=e[t];this.needsUpdate=!0}dispose(e=!0){let t;for(this.parent[de].delete(this.ownPropertyName),this.parent[oe].forEach((e,n)=>{t=n.indexOf(this),-1<t&&n.splice(t,1)}),this.dependencyValues=void 0,this.observers=void 0,this.intermediate=void 0,this._value=void 0,t=0;t<this.superDerivatives.length;t++)this.superDerivatives[t].derivatives=this.superDerivatives[t].derivatives.filter(e=>e!==this),a(this.superDerivatives[t],!0);for(t=0;t<this.derivatives.length;t++)this.derivatives[t].dispose(!1);if(e)for(t=0;t<this.superDerivatives.length;t++)n(this.superDerivatives[t],$);this.superDerivatives=void 0}}D(O,"State",{value:function(e,t){if("string"!=typeof e)throw new TypeError(`Can't create Cue State Module. First argument must be name of type string but is of type "${typeof e}".`);else if("function"!=typeof t)throw new TypeError(`Can't create Cue State Module. Second argument must be module of type function but is of type "${typeof t}".`);else if(q.has(e))throw new Error(`A State Module has already been registered under name "${e}". Unregister, use a unique name or consider namespacing.with.dots-or-hyphens...`);let n=null,r=null;const i=e=>{if(n||(n=p(t)),n.static)return r||(r=I(T(n.actions),n.defaults,n.computed)),n.initialize&&n.initialize.call(r,e),r;else{const t=I(T(n.actions),u(n.defaults),n.computed);return n.initialize&&n.initialize.call(t,e),t}};return q.set(e,i),i}});const Ce=new Map,Oe=new WeakMap,be=T(M,{import:{value:function(e){const t=Ce.get(e);if(!t)throw new ReferenceError(`Can't import UI Component because nothing is registered under "${e}".`);return t}}});class Se{constructor(e){if("object"!=typeof e)throw new TypeError(`Can't create Reactor with the provided target because it has to be of type 'object' but is "${typeof e}".`);else if(e[re])throw new TypeError(`Can't create Reactor because the provided target object is already wrapped by another Reactor.`);this.target=e,Object.defineProperties(e,{[re]:{value:!0,configurable:!0},[ie]:{value:()=>this.dispose(),configurable:!0}}),this.source=void 0,this.observedProperties=new Set}attachTo(e){if(this.source)throw new ReferenceError(`Observer already has a source. Detach from the existing source before attaching to a new one.`);if("object"!=typeof e)throw new TypeError(`Can't observe source because it has to be of type 'object' but is "${typeof e}".`);return this.source=e[ve]||e,this}detach(){if(!this.source)throw new ReferenceError(`Can't clear non-existing source.`);return this.source[te]&&this.observedProperties.size&&this.unobserveProperties(),this.source=void 0,this}dispose(){this.unobserveProperties(),delete this.target[re],delete this.target[ie],this.source=void 0,this.target=void 0,this.observedProperties=void 0}observeProperty(e,t,r){if(!this.source)throw new ReferenceError(`Can't observe because no observation source has been assigned to observer!`);if("function"!=typeof t)throw new TypeError(`Can't observe property "${e}" because the provided handler is of type "${typeof t}".`);this.source[te]||(this.source=Ee.create(this.source,this.sourceParent,this.sourceOwnPropertyName));const i=this.source[e];let s=i;const a=this.source[de].get(e),o=this.source[ae],d=new Re(this,t);return this.source[se].add(this),this.observedProperties.add(e),"object"==typeof i&&null!==i&&(i[te]?s=i[ge]:i[ve]?this.source[e]=i[ve]:!a&&Ee.create(i,this.source,e)),a&&(a.observers.push(d),n(a,$)),o.has(e)?o.get(e).push(d):o.set(e,[d]),!0===r&&d.react(new Pe("set",e,s,void 0)),this}observeProperties(e,t){if(!this.source)throw new ReferenceError(`Can't observe because no observation source has been assigned to observer!`);if("object"!=typeof e)throw new TypeError(`Can't observe properties because the propHandler is not a pojo of type {property: function}`);this.source[te]||(this.source=Ee.create(this.source)),this.source[se].add(this);const r=this.source[ae],i=this.source[de];let s,a,o,d,l;for(s in e){if("function"!=typeof e[s])throw new TypeError(`Reaction for "${s}" has to be a function but is of type "${typeof e[s]}".`);o=this.source[s],d=o,l=i.get(s),a=new Re(this,e[s]),this.observedProperties.add(s),"object"==typeof o&&null!==o&&(o[te]?d=o[ge]:o[ve]?this.source[s]=o[ve]:!l&&Ee.create(o,this.source,s)),l&&(l.observers.push(a),n(l,$)),r.has(s)?r.get(s).push(a):r.set(s,[a]),!0===t&&a.react(new Pe("set",s,d,void 0))}return this}unobserveProperty(e){if(!this.observedProperties.has(e))throw new ReferenceError(`Can't unobserve property "${e}" because it is not being observed.`);else this.observedProperties.delete(e);const t=this.source[de].get(e);t&&(t.observers.splice(0,t.observers.length),n(t,K));const r=this.source[ae],i=r.get(e);if(i){const t=i.filter(e=>e.reactor!==this);0===t.length?r.delete(e):r.set(e,t)}0===this.observedProperties.size&&this.source[se].delete(this),0===r.size&&(this.source.dispose(),this.source=void 0,this.sourceParent=void 0,this.sourceOwnPropertyName=void 0)}unobserveProperties(e){const t=this.source[se],r=this.source[ae],i=this.source[de];let s,a;e||(e=this.observedProperties),e.forEach(e=>{if(!this.observedProperties.has(e))throw new ReferenceError(`Can't unobserve property "${e}" because it is not being observed.`);else this.observedProperties.delete(e);s=i.get(e),s&&(s.observers.splice(0,s.observers.length),n(s,K)),a=r.get(e),a&&(a=a.filter(e=>e.reactor!==this),0===a.length?r.delete(e):r.set(e,a))}),0===this.observedProperties.size&&t.delete(this),0===r.size&&(this.source.dispose(),this.source=void 0,this.sourceParent=void 0,this.sourceOwnPropertyName=void 0)}}const Ie=Symbol("ClassName Map"),Te=Symbol("Original ClassList");class De{constructor(e,t){if(!e)throw new TypeError(`Can't create MappedClassList. First argument has to be a plain Object, 2D Array or a Map but is ${JSON.stringify(e)}.`);else e.constructor===Object?e=new Map(Object.entries(e)):Array.isArray(e)&&(e=new Map(e));Object.defineProperties(this,{[Ie]:{value:e},[Te]:{value:t.classList}})}item(e){return this[Te].item(e)}contains(e){return this[Te].contains(this[Ie].get(e)||e)}add(e){this[Te].add(this[Ie].get(e)||e)}remove(e){this[Te].remove(this[Ie].get(e)||e)}replace(e,t){this[Te].replace(this[Ie].get(e)||e,this[Ie].get(t)||t)}toggle(e){this[Te].toggle(this[Ie].get(e)||e)}}const{createUID:Ae}=M,we=(()=>{const e=document.createElement("style");return e.id="CUE-STYLES",document.head.appendChild(e),e.sheet})();class Ne{constructor(e,t,n,r){this.element=e,this.imports=t,this.keyframes=r,this.styles=n,n&&Object.keys(n).length&&Object.defineProperty(e,"classList",{value:new De(n,e),enumerable:!0,writable:!1,configurable:!0})}getRefs(){const e=this.element.querySelectorAll("[ref]");if(e.length){const t={};for(let n,r=0;r<e.length;r++)n=e[r],t[n.getAttribute("ref")]=n;return t}}getIndex(){const e=this.element.parentNode.children;for(let t=0;t<e.length;t++)if(e[t]===this.element)return t;return-1}getSiblings(e=!1){if(e)return Array.from(this.element.parentNode.children);else{const e=[],t=this.element.parentNode.children;for(let n=0;n<t.length;n++)t[n]!==this.element&&e.push(t[n]);return e}}getBoundingBox(){const e=this.element.cloneNode(!0);e.style.position="absolute",e.style.left="-100000px",e.style.top="-100000px",e.style.display="block",this.element.parentElement.appendChild(e);const t=e.getBoundingClientRect();return e.parentElement.removeChild(e),t}setChildren({from:n=[],to:e,create:t,update:r=b}){if(0===e.length)return void(this.element.textContent="");if(0===n.length){for(let n=0;n<e.length;n++)parent.appendChild(t(e[n]));return}v(this.element,n,e,t,r)}observe(e,t,n,r){const i=Oe.get(this.element)||Oe.set(this.element,new Se(this.element).attachTo(e)).get(this.element);"object"==typeof t&&t?i.observeProperties(t,"boolean"!=typeof n||n):i.observeProperty(t,n,r||!0)}unobserve(e){const t=Oe.get(this.element);if(t)"object"==typeof e&&e?t.unobserveProperties(e):t.unobserveProperty(e);else throw new ReferenceError(`Can't unobserve because element is not observing any state.`)}on(e,t,n){if(1===arguments.length&&e&&e.constructor===Object)for(const n in e)this.element.addEventListener(n,e[n],t&&"object"==typeof t?t:{});else if("function"==typeof t)this.element.addEventListener(e,t,n||{});else throw new TypeError(`Can't bind event listener(s) because of invalid arguments.`)}off(e,t){if(1===arguments.length&&e&&e.constructor===Object)for(const t in e)this.element.removeEventListener(t,e[t]);else if("function"==typeof t)this.element.removeEventListener(e,t);else throw new TypeError(`Can't remove event listener(s) because of invalid arguments.`)}}D(O,"UI",{value:function(e,t){if("string"!=typeof e)throw new TypeError(`Can't create Cue-UI Module. First argument must be name of type string but is of type "${typeof e}".`);else if(!t||"function"!=typeof t&&t.constructor!==Object)throw new TypeError(`Can't create Cue-UI Module. Second argument must be module initializer function or configuration object but is of type "${typeof t}".`);else if(Ce.has(e))throw new Error(`A UI Module has already been registered under name "${e}". Unregister, use a unique name or consider namespacing.with.dots-or-hyphens...`);let n=null;const r=e=>{n||(n=m(t));const r=new Ne(n.template.cloneNode(!0),n.imports,n.styles,n.keyframes);return n.initialize&&n.initialize.call(r,e),r.element};return Ce.set(e,r),r}});let Le=null,Ve=document.body,Be=null;const xe=T(M,{RootState:{get(){return Le},set(e){Le=e}},RootComponent:{get(){return Be},set(e){Be=e}},RootComponentParent:{get(){return Ve},set(e){if(!e||!(e instanceof Element||e.nodeName))throw new TypeError(`RootComponentParent must be a DOM Element but is ${JSON.stringify(e)}`);Ve=e}},importState:{value:function(e){return he.import(e)}},importComponent:{value:function(e){return be.import(e)}},start:{value:function(e){if(!this.RootState)throw new Error(`Application can't start because no RootState has been defined.`);if(!this.RootComponent)throw new Error(`Application can't start because no RootComponent has been defined.`);const t="function"==typeof this.RootState?this.RootState(e):this.RootState;fe.ROOT=Ee.create(t,fe,"ROOT"),Ve.appendChild(this.RootComponent(fe.ROOT))}}});let je=!1;D(O,"App",{value:function(e){if(je)throw new Error(`An App has already been registered. You can only run a single Cue App per context.`);je=!0,e(xe)}})})(window||this);