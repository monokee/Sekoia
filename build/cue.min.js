!function(e){const t=()=>{},n=(e,t)=>{if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;let s;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(s=e.length;0!=s--;)if(!n(e[s],t[s]))return!1;return!0}const r=Object.keys(e),o=r.length;if(o!==Object.keys(t).length)return!1;for(s=o;0!=s--;)if(!Object.prototype.hasOwnProperty.call(t,r[s]))return!1;for(s=o;0!=s--;){const o=r[s];if(!n(e[o],t[o]))return!1}return!0}return e!=e&&t!=t},s=e=>{if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++)t.push(s(e[n]));return t}const t=Object.keys(e),n={};for(let r,o=0;o<t.length;o++)r=t[o],n[r]=s(e[r]);return n},r=e=>{if(!e.length)return"0";let t=0;for(let n,s=0;s<e.length;s++)n=e.charCodeAt(s),t=(t<<5)-t+n,t&=t;return t+""},o=e=>{const t={};if(e.length>1){const n=e.substring(1).replace(/\+/g," ").replace(/;/g,"&").split("&");for(let e,s,r=0;r<n.length;r++)e=n[r].split("=",2),s=decodeURIComponent(e[0]),s&&(t[s]=!(e.length>1)||decodeURIComponent(e[1]))}return t},i=e=>{let t="?";for(const n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return"?"===t?t="":"&"===t[t.length-1]&&(t=t.substring(0,t.length-1)),t};function a(e,t,n,s,r){let o,i,a,l=0,c=0,h=!0,u=t.length-1,d=n.length-1,f=e.firstChild,p=f,m=e.lastChild,g=m;e:for(;h;){let s;for(h=!1,o=t[l],i=n[c];o===i;){if(r(f,i),l++,c++,p=f=f.nextSibling,u<l||d<c)break e;o=t[l],i=n[c]}for(o=t[u],i=n[d];o===i;){if(r(m,i),u--,d--,a=m,g=m=m.previousSibling,u<l||d<c)break e;o=t[u],i=n[d]}for(o=t[u],i=n[c];o===i;){if(h=!0,r(m,i),s=m.previousSibling,e.insertBefore(m,p),g=m=s,c++,u--,u<l||d<c)break e;o=t[u],i=n[c]}for(o=t[l],i=n[d];o===i;){if(h=!0,r(f,i),s=f.nextSibling,e.insertBefore(f,a),a=g=f,f=s,l++,d--,u<l||d<c)break e;o=t[l],i=n[d]}}if(d<c){if(l<=u){let t;for(;l<=u;)0===u?e.removeChild(m):(t=m.previousSibling,e.removeChild(m),m=t),u--}return}if(u<l){if(c<=d)for(;c<=d;)a?e.insertBefore(s(n[c],c,n),a):e.appendChild(s(n[c],c,n)),c++;return}const y=new Array(d+1-c),b=new Map;let v;for(v=c;v<=d;v++)y[v]=-1,b.set(n[v],v);let w=0,S=[];for(v=l;v<=u;v++)b.has(t[v])?(y[b.get(t[v])]=v,w++):S.push(v);if(0===w){for(e.textContent="",v=c;v<=d;v++)e.appendChild(s(n[v],v,n));return}const C=((e,t)=>{const n=[],s=[],r=new Array(e.length);let o,i,a,l=-1;for(o=t;o<e.length;o++){if(i=e[o],i<0)continue;let t,c=-1,h=n.length;if(h>0&&n[h-1]<=i)a=h-1;else{for(;h-c>1;)t=Math.floor((c+h)/2),n[t]>i?h=t:c=t;a=c}-1!==a&&(r[o]=s[a]),a===l?(l++,n[l]=i,s[l]=o):i<n[a+1]&&(n[a+1]=i,s[a+1]=o)}for(o=s[l];l>=0;o=r[o],l--)n[l]=o;return n})(y,c),x=[];let O=f;for(v=l;v<=u;v++)x[v]=O,O=O.nextSibling;for(v=0;v<S.length;v++)e.removeChild(x[S[v]]);let E,T=C.length-1;for(v=d;v>=c;v--)C[T]===v?(a=x[y[C[T]]],r(a,n[v]),T--):(-1===y[v]?E=s(n[v],v,n):(E=x[y[v]],r(E,n[v])),e.insertBefore(E,a),a=E)}function l(e,t,n){throw new Error(`Can not change data in reactions: this.${t} = ${n} has been ignored.`)}const c=(()=>{try{return e.localStorage.setItem("CUE_CACHE::TEST","1"),e.localStorage.removeItem("CUE_CACHE::TEST"),e.localStorage}catch(e){return{_data:{},setItem(e,t){this._data[e]=t},getItem(e){return this._data[e]||null},removeItem(e){delete this._data[e]}}}})(),h=new Map,u="CUE_SERVER_CACHE::KEYS",d=Symbol();let f=null;const p={get:(e,t=0,n)=>new Promise(((s,o)=>{b();const i=r(e),a=function(e){const t=c.getItem(`${e}::ts`);if(null===t)return d;if(Number(t)<Date.now())return m(e),d;try{return JSON.parse(c.getItem(e))}catch(t){return c.getItem(e)}}(i);a===d?g(e,"GET",n).then((e=>{t>0&&function(e,t,n){const s=Date.now()+1e3*n;"object"==typeof t&&(t=JSON.stringify(t));const r=`${e}::ts`;c.setItem(e,t),c.setItem(r,`${s}`);let o=c.getItem(u);null===o?o=`${e},${r},`:-1===o.indexOf(`${e},`)&&(o=`${o}${e},${r},`);c.setItem(u,o)}(i,e,t),s(e)})).catch((e=>{o(e)})).finally(v):(v(),s(a))})),post:(e,t,n)=>new Promise(((s,r)=>{b(),g(e,"POST",n,t).then((e=>s(e))).catch((e=>r(e))).finally(v)})),put:(e,t,n)=>new Promise(((s,r)=>{b(),g(e,"PUT",n,t).then((e=>s(e))).catch((e=>r(e))).finally(v)})),delete:(e,t,n)=>new Promise(((s,r)=>{b(),g(e,"DELETE",n,t).then((e=>s(e))).catch((e=>r(e))).finally(v)})),clearCache(e){m(r(e))},onRequestStart(){},onRequestStop(e){}};function m(e){if(e){if(null!==c.getItem(e)){const t=`${e}::ts`;c.removeItem(e),c.removeItem(t);const n=c.getItem(u);if(null!==n){const s=n.split(",");s.splice(s.indexOf(e),1),s.splice(s.indexOf(t),1),c.setItem(u,`${s.join(",")},`)}}}else{const e=c.getItem(u);if(null!==e){const t=e.split(",");for(let e=0;e<t.length;e++)c.removeItem(t[e]);c.removeItem(u)}}}function g(e,t,n,s={}){if(h.has(e))return h.get(e);{const r={"Content-Type":"application/json"};return n&&(r.Authorization=`Bearer ${n}`),h.set(e,new Promise(((n,o)=>{fetch(e,{method:t,mode:"cors",cache:"no-store",credentials:"same-origin",headers:r,redirect:"follow",referrer:"no-referrer",body:"GET"===t?null:"string"==typeof s?s:JSON.stringify(s)}).then((e=>{e.ok?204===e.status?n({}):y(e,n):y(e,o)})).catch((e=>{o(e)})).finally((()=>{h.delete(e)}))}))),h.get(e)}}function y(e,t){e.text().then((e=>{try{t(JSON.parse(e))}catch(n){t(e)}}))}function b(){clearTimeout(f),p.onRequestStart()}function v(){f=setTimeout((()=>{p.onRequestStop()}),100)}const w=new Map,S=new Map,C=new Map,x=new Map,O=[];let E=null;const T={cueEvent(e,t){w.set(e,t)},cueCallback(e,t){S.set(e,t)},cueComputations(e,t,n,s){const r=e.get(n),o=[e,t,s];for(let e=0;e<r.length;e++)C.set(r[e],o)},react(){cancelAnimationFrame(E),E=requestAnimationFrame(_)}};function _(){let e,t,n,s,r,o,i,a;for(t of w.entries())t[0](t[1]);for(;C.size>0;){for(t of C.entries())s=t[0],-1===O.indexOf(s)&&(r=t[1],i=r[0],o=r[1],s.needsUpdate=!0,a=s.value(r[2]),!0===s.hasChanged&&(o[s.ownPropertyName]&&S.set(o[s.ownPropertyName],a),x.set(s,r)),O.push(s));for(t of(C.clear(),x.entries()))if(s=t[0],r=t[1],n=r[0].get(s.ownPropertyName),n)for(e=0;e<n.length;e++)C.set(n[e],r);x.clear()}for(t of S.entries())t[0](t[1]);for(w.clear(),S.clear();O.length>0;)O.pop()}const A=(e,t)=>e+"."+t+"::CueStore",P=(e,t)=>void 0===t?null:t,I=new Map,M=Symbol("Cue.Store.internals"),j=Symbol("Cue.Store"),k=Symbol("Cue.Store.set"),R=Symbol("Cue.Store.get"),$=Symbol("Cue.Store.dispatch");class L{constructor(e,t){this.id=j,this.store=e,this.key=t}get(){return this.store[M].data[this.key]}set(e){this.store[M].data[this.key]=e,this.store[$](this.key,e)}}class N{constructor(e,t,n=null){const r=this[M]={name:e,defaultData:s(t),events:new Map,bindings:new Map,storage:n};if(null===n)r.usesStorage=!1,r.data=t;else{r.usesStorage=!0;const s=r.storageKeys={};for(const o in t){const t=A(e,o);s[o]=t,null===n.getItem(t)&&n.setItem(t,JSON.stringify(r.defaultData[o],P))}r.data=new Proxy({},{get:(t,r)=>JSON.parse(n.getItem(s[r]||A(e,r))),set:(t,r,o)=>(n.setItem(s[r]||A(e,r),JSON.stringify(o,P)),!0),has:(t,r)=>null!==n.getItem(s[r]||A(e,r)),deleteProperty:(t,r)=>(n.removeItem(s[r]||A(e,r)),!0)})}}[R](e){return this[M].data[e]}[k](e,t){this[M].data[e]=t,this[$](e,t)}[$](e,t){const n=this[M].events.get(e);if(n){for(let e=0;e<n.length;e++)T.cueEvent(n[e],t);T.react()}}get(e){const t=this[M];if(t.usesStorage){if(!e){const e={};for(const n in t.defaultData)e[n]=t.data[n];return e}return t.data[e]}return e?t.data[e]:t.data}getInitial(e){return s(e?this[M].defaultData[e]:this[M].defaultData)}set(e,t){const s=this[M].data;if(e&&"object"==typeof e){let t,r;for(t in e)r=e[t],n(s[t],r)||this[k](t,r)}else n(s[e],t)||this[k](e,t)}reset(e){e?this.set(e,s(this[M].defaultData[e])):this.set(s(this[M].defaultData))}has(e){const t=this[M];return t.usesStorage?null!==t.storage.getItem(t.storageKeys[e]||A(t.name,e)):this[M].data.hasOwnProperty(e)}remove(e){delete this[M].data[e],this[$](e,void 0)}bind(e){const t=this[M];return t.bindings.has(e)||t.bindings.set(e,new L(this,e)),t.bindings.get(e)}subscribe(e,t,n=!1){const s=this[M];return s.events.has(e)?s.events.get(e).push(t):s.events.set(e,[t]),!0===n&&this[$](e,s.data[e]),{unsubscribe:()=>{const n=s.events.get(e);n.splice(n.indexOf(t),1)}}}}const q={create(e,t,n=null){if(I.has(e))throw new Error('Can not create Store "'+e+'". A store with the same name already exists.');const s=new N(e,t,n);return I.set(e,s),s},destroy(e){if(!I.has(e))throw new Error('Can not destroy Store "'+e+'". Store does not exist.');const t=I.get(e);t.clear(!0),t[M].events.clear(),I.delete(e)}},H={computedProperty:null,computedProperties:null};let D=null,U=[];class z{constructor(e,t,n=[]){this.ownPropertyName=e,this.computation=t,this.sourceProperties=n,this.intermediate=void 0,this._value=void 0,this._type=-1,this.needsUpdate=!0,this.hasChanged=!1}value(e){return!0===this.needsUpdate&&(this.intermediate=this.computation.call(e,e,this._value),Array.isArray(this.intermediate)?(this.hasChanged=1!==this._type||!((e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0})(this._value,this.intermediate))&&(this._value=this.intermediate.slice(),this._type=1):"object"==typeof this.intermediate&&null!==this.intermediate?(this.hasChanged=2!==this._type||!((e,t)=>{const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(let r,o=0;o<n.length;o++)if(r=n[o],-1===s.indexOf(r)||e[r]!==t[r])return!1;return!0})(this._value,this.intermediate))&&(this._value=Object.assign({},this.intermediate),this._type=2):(this.hasChanged=this._value!==this.intermediate)&&(this._value=this.intermediate,this._type=0),this.needsUpdate=!1),this._value}}function Q(e,t){return function(e){D=e;const t=new Map;let n;for(n of e.keys())G(n,[],t);return D=null,U=[],t}(function(e,t){Object.assign(H,{computedProperties:t});const n=new Proxy(e,{get:B});let s;for(s of t.values()){H.computedProperty=s;try{s.computation.call(n,n)}catch(e){if(e.type&&"cue-internal"===e.type)throw new Error(e.message)}}return H.computedProperty=null,H.computedProperties=null,t}(e,t))}function B(e,t){const{computedProperty:n}=H;if(!e.hasOwnProperty(t))throw{type:"cue-internal",message:`Cannot resolve computed property "${n.ownPropertyName}" because dependency "${t}" doesn't exist.`};-1===n.sourceProperties.indexOf(t)&&n.sourceProperties.push(t)}function G(e,t,n){if(D.has(e)){t.push(e),U.push(e);const s=D.get(e);for(let e,r=0;r<s.sourceProperties.length;r++){if(e=s.sourceProperties[r],-1!==t.indexOf(e))throw new Error(`Circular dependency. "${s.ownPropertyName}" is required by "${e}": ${t.join(" -> ")}`);-1===U.indexOf(e)&&G(e,t,n)}n.has(e)||n.set(e,s)}}const J=/(\$self(?=[\\040,{.:#[>+~]))|\$self\b/g,F=[" ",".",":","#","[",">","+","~"];let K=-1;const Y=new Set,V=new Map,W=new Map,X=new Map,Z=new Map,ee=Symbol("Component Data"),te=document.createElement("div"),ne={compiler:document.getElementById("cue::compiler")||Object.assign(document.head.appendChild(document.createElement("style")),{id:"cue::compiler"}),components:document.getElementById("cue::components")||Object.assign(document.head.appendChild(document.createElement("style")),{id:"cue::components"})},se=(e,t,n=[])=>{for(let s,r=0;r<e.children.length;r++)s=e.children[r],s.hasAttribute(t)&&n.push(s),Y.has(s.tagName)||se(s,t,n);return n},re=(e,t)=>{for(let n,s,r,o,i=0;i<e.children.length;i++)n=e.children[i],s=n.getAttribute("$"),s&&(r=n.getAttribute("class"),o=s+ ++K,t["$"+s]="."+o,n.setAttribute("class",r?r+" "+o:o),n.removeAttribute("$")),Y.has(n.tagName)||re(n,t);return t};class oe{constructor(e,t){this.name=e,this.ready=!1,this.template=document.createElement("template"),this.template.innerHTML=t.element||"",this.refNames=re(this.template.content,{})}setupOnce(e){if(!1===this.ready){this.ready=!0,this.template.__slots={},this.template.__hasSlots=!1;const n=this.template.content.querySelectorAll("slot");for(let e=0;e<n.length;e++){const t=n[e];this.template.__slots[t.getAttribute("name")]=t.outerHTML,this.template.__hasSlots=!0}e.style=e.style||e.styles,e.style&&(this.style=this.createScopedStyles(e.style),ne.components.innerHTML+=this.style),this.data={static:{},computed:new Map,bindings:{},reactions:{}};const s={};if(e.data)for(const t in e.data){const n=e.data[t];s[t]=n.value,n.value&&n.value.id===j?this.data.bindings[t]=n.value:"function"==typeof n.value?this.data.computed.set(t,new z(t,n.value)):this.data.static[t]=n.value,"function"==typeof n.reaction&&(this.data.reactions[t]=n.reaction)}this.data.computed.size&&(this.data.computed=Q(s,this.data.computed)),this.initialize="function"==typeof e.initialize?e.initialize:t}}createScopedStyles(e){e=e.replace(J,this.name);for(const t in this.refNames)e=e.replace(new RegExp("(\\"+t+"(?=[\\40{,.:#[>+~]))|\\"+t+"\b","g"),this.refNames[t]);ne.compiler.innerHTML=e;const t=ne.compiler.sheet;let n="",s="";for(let e,r=0;r<t.rules.length;r++)e=t.rules[r],7===e.type||8===e.type?n+=e.cssText:1===e.type?n+=this.constructScopedStyleRule(e):4===e.type||12===e.type?s+=this.constructScopedStyleQuery(e):console.warn(`CSS Rule of type "${e.type}" is not currently supported by Cue Components.`);return n+=s,ne.compiler.innerHTML="",n}constructScopedStyleQuery(e,t=""){4===e.type?t+="@media "+e.media.mediaText+" {":t+="@supports "+e.conditionText+" {";let n="";for(let s,r=0;r<e.cssRules.length;r++)s=e.cssRules[r],7===s.type||8===s.type?t+=s.cssText:1===s.type?t+=this.constructScopedStyleRule(s,t):4===s.type||12===s.type?n+=this.constructScopedStyleQuery(s):console.warn(`CSS Rule of type "${s.type}" is not currently supported by Components.`);return t+=n+" }"}constructScopedStyleRule(e){let t="";if(e.selectorText.indexOf(",")>-1){const n=e.selectorText.split(","),s=[];for(let e,t=0;t<n.length;t++)e=n[t].trim(),0===e.lastIndexOf(":root",0)?s.push(e.replace(":root","")):this.isTopLevelSelector(e,this.name)?s.push(e):s.push(this.name+" "+e);t+=s.join(", ")+e.cssText.substr(e.selectorText.length)}else 0===e.selectorText.lastIndexOf(":root",0)?t+=e.cssText.replace(":root",""):this.isTopLevelSelector(e.selectorText)?t+=e.cssText:t+=this.name+" "+e.cssText;return t}isTopLevelSelector(e){return e===this.name||0===e.lastIndexOf(this.name,0)&&F.indexOf(e.charAt(this.name.length))>-1}}class ie extends HTMLElement{constructor(e,t){super(),e.setupOnce(t);const n=this[ee]={module:e,reactions:{},computedProperties:new Map,subscriptions:[],refs:{},initialized:!1,dataEvent:new CustomEvent("data",{bubbles:!0,cancelable:!0,detail:{key:"",value:void 0}})},r=n.computedProperties;if(n._data=s(e.data.static),n.data=new Proxy({},{set:l,get:(t,s)=>e.data.bindings[s]?e.data.bindings[s].get():r.has(s)?r.get(s).value(n.data):n._data[s]}),e.data.computed.size)for(const t of e.data.computed.entries()){const e=t[1];r.set(t[0],new z(e.ownPropertyName,e.computation,e.sourceProperties))}n.dependencyGraph=function(e){const t=new Map;let n,s,r;for(n of e.values())for(s=0;s<n.sourceProperties.length;s++)r=n.sourceProperties[s],t.has(r)?t.get(r).push(n):t.set(r,[n]);return t}(n.computedProperties);for(const t in e.data.reactions)n.reactions[t]=s=>{e.data.reactions[t](n.refs,s,n.data)}}connectedCallback(){if(this.hasAttribute("slot"))return;const e=this[ee],t=e.module;if(!1===e.initialized){if(e.initialized=!0,t.template.__hasSlots){let e=null;if(this.hasAttribute("cue-slot")){const t=this.getAttribute("cue-slot");e=Z.get(t)}else if(this.innerHTML){const t=this.querySelectorAll("[slot]");for(let n=0;n<t.length;n++){const s=t[n];e||(e={}),e[s.getAttribute("slot")]=s.outerHTML}}if(e){let n=t.template.innerHTML,s=!1;for(const r in e)t.template.__slots[r]&&(s=!0,n=n.replace(t.template.__slots[r],e[r]));this.innerHTML=n,s&&re(this,t.refNames)}else this.innerHTML=t.template.innerHTML}else this.innerHTML=t.template.innerHTML;for(const n in t.refNames){const s=this.querySelector(t.refNames[n]);s&&(s[ee]||(s[ee]={},s.renderEach=this.renderEach),e.refs[n]=s)}if(e.refs.$self=this,this.hasAttribute("cue-data")){const t=this.getAttribute("cue-data"),n=V.get(t),r=s(e._data),o=s(n);e._data=n,Object.assign(e._data,r,o)}if(this.hasAttribute("cue-func")){const e=this.getAttribute("cue-func"),t=X.get(e);for(const e in t)ie.prototype[e]=t[e]}for(const t in e.reactions)T.cueCallback(e.reactions[t],e.data[t]);T.react(),requestAnimationFrame((()=>{if(t.initialize.call(this,e.refs),this.hasAttribute("cue-init")){const t=this.getAttribute("cue-init");W.get(t).call(this,e.refs)}}))}for(const n in t.data.bindings)e.dependencyGraph.has(n)&&e.subscriptions.push(t.data.bindings[n].store.subscribe(t.data.bindings[n].key,(()=>T.cueComputations(e.dependencyGraph,e.reactions,n,e.data)))),e.reactions[n]&&e.subscriptions.push(t.data.bindings[n].store.subscribe(t.data.bindings[n].key,e.reactions[n]))}disconnectedCallback(){const e=this[ee].subscriptions;for(;e.length;)e.pop().unsubscribe()}getData(e){if(!e){const e=this[ee],t={};let n;for(n in e.module.data.bindings)t[n]=e.module.data.bindings[n].get();for(n in e._data)t[n]=e._data[n];return t}return this[ee].data[e]}setData(e,t){if("object"==typeof e)for(const t in e)this.setData(t,e[t]);const r=this[ee],o=r.module;if(o.data.computed.has(e))throw new Error(`You can not set property "${e}" because it is a computed property.`);o.data.bindings[e]&&!n(o.data.bindings[e].get(!1),t)?(r.dataEvent.detail.key=e,r.dataEvent.detail.value=s(t),this.dispatchEvent(r.dataEvent),o.data.bindings[e].set(t)):n(r._data[e],t)||(r._data[e]=t,r.dataEvent.detail.key=e,r.dataEvent.detail.value=s(t),this.dispatchEvent(r.dataEvent),r.reactions[e]&&T.cueCallback(r.reactions[e],t),r.dependencyGraph.has(e)&&T.cueComputations(r.dependencyGraph,r.reactions,e,r.data),T.react())}autoBind(e="data-bind"){const t=se(this,e);t.length&&this.addEventListener("input",(n=>{t.indexOf(n.target)>-1&&(n.target.matches('input[type="checkbox"]')?this.setData(n.target.getAttribute(e),n.target.checked?1:0):n.target.matches("select[multiple]")?this.setData(n.target.getAttribute(e),Array.from(n.target.selectedOptions).map((e=>e.value))):this.setData(n.target.getAttribute(e),n.target.value))}))}renderEach(e,n,s=t){e=Array.isArray(e)?e:Object.values(e||{});const r=this[ee].childData||[];if(this[ee].childData=e,0===e.length)this.innerHTML="";else if(0===r.length)for(let t=0;t<e.length;t++)this.appendChild(n(e[t],t,e));else a(this,r,e,n,s)}}const ae={define(e,t){const n=new oe(e,t);class s extends ie{constructor(){super(n,t)}}for(const e in t)"function"==typeof t[e]&&"initialize"!==e&&(s.prototype[e]=t[e]);Y.add(e.toUpperCase()),customElements.define(e,s);const r="<"+e,o="</"+e+">";return(e={})=>((e,t,n,s)=>{let r=e,o=null;for(const e in s){const t=s[e];if("string"==typeof t)r+=" "+e+'="'+t+'"';else{++K;const n=""+K;"data"===e?(V.set(n,t),r+=' cue-data="'+n+'"'):"slots"===e?(Z.set(n,t),r+=' cue-slot="'+n+'"'):"initialize"===e?(W.set(n,t),r+=' cue-init="'+n+'"'):"function"==typeof t&&(o||(o={}),o[e]=t)}}if(o){++K;const e=""+K;X.set(e,o),r+=' cue-func="'+e+'"'}return r+=">"+t+n,r})(r,n.template.innerHTML,o,e)},extend:(e,t)=>(n={})=>e(Object.assign(t,n)),create(e){if("string"!=typeof(e=(e="function"==typeof e?e():e).trim())||"<"!==e[0])throw new Error('[Cue.js] - Component.create(node) -> argument "node" is not valid HTML: "'+e+'"');return te.innerHTML=e,te.children[0]}},le=e.location.origin+e.location.pathname,ce=[le,e.location.hostname,e.location.hostname+"/",e.location.origin];"/"!==le[le.length-1]&&ce.push(le+"/"),e.location.pathname&&"/"!==e.location.pathname&&ce.push(e.location.pathname);const he=["/","#","/#","/#/",...ce],ue=new URL(le),de=Ie(le),fe=new Map,pe=new Set,me=[];let ge=null;const ye={},be={params:{},keepQuery:!0,forceReload:!1,history:"pushState"};let ve=!1,we=o(e.location.search),Se=["/"];e.location.hash&&Se.push(...e.location.hash.split("/"));const Ce={before(e,t){if(xe(),"*"===e)null!==ge&&console.warn("[Cue.js] - Router.before(*, filter) - overwriting previously registered wildcard filter (*)"),ge=t;else{const{hash:n}=_e(e);if(fe.has(n))throw new Error(`[Cue.js] Router.beforeRoute() already has a filter for ${"#"===n?`${e} (root url)`:e}`);fe.set(n,t)}},on(e,t){if(xe(),"*"===e)-1===me.indexOf(t)&&me.push(t);else{const{hash:n}=_e(e);if(pe.has(n))throw new Error('[Cue.js] Router.onRoute() already has a action for "'+n=="#"?e+" (root url)":e+'".');pe.add(n),function(e,t){const n=ye["/"]||(ye["/"]={action:void 0,children:{}});if("#"===e)n.action=t;else{const s=e.split("/"),r=s[s.length-1];s.reduce(((e,n)=>e[n]?(n===r&&(e[n].action=t),e[n].children):(e[n]={action:n===r?t:void 0,children:{}}).children),n.children)}}(n,t)}},hasFilter(e){if("*"===e)return null!==ge;{const{hash:t}=_e(e);return fe.has(t)}},hasAction(e){if("*"===e)return me.length>0;{const{hash:t}=_e(e);return pe.has(t)}},navigate(t,n={}){if(0===t.lastIndexOf("http",0)&&t!==e.location.href)return e.location.href=t;const{hash:s,query:r,rel:i}=_e(t);!0===(n=Object.assign({},be,n)).keepQuery?Object.assign(we,o(r)):we=o(r),ge?ge(i,we,(e=>{e!==i?Te(e):fe.has(s)?fe.get(s)(i,we,(e=>{e!==i?Te(e):Oe(s,r,n.keepQuery,n.history)})):Oe(s,r,n.keepQuery,n.history)})):fe.has(s)?fe.get(s)(i,we,(e=>{e!==i?Te(e):Oe(s,r,n.keepQuery,n.history)})):Oe(s,r,n.keepQuery,n.history)},resolve(t={}){this.navigate(e.location.href,t)},getQueryParameters:e=>e?we[e]:Object.assign({},we),addQueryParameters(e,t){if(void 0===t&&"object"==typeof e)for(const t in e)we[t]=e[t];else we[e]=t;Ee()},setQueryParameters(e){we=s(e),Ee()},removeQueryParameters(e){e?Array.isArray(e)?e.forEach((e=>{we[e]&&delete we[e]})):we[e]&&delete we[e]:we={},Ee()}};function xe(){ve||(ve=!0,e.addEventListener("popstate",(()=>{Ce.navigate(e.location.href,{history:"replaceState",forceReload:!1})})))}function Oe(t,n,s,r){!function(e){const t=de+(e="#"===e?"":e);for(let e=0;e<me.length;e++)me[e](t,we)}(t),function(e){const t=["/"];"#"!==e&&t.push(...e.split("/"));const n=((e,t)=>{const n=[];for(let s=0;s<e.length;s++)for(let r=0;r<t.length;r++)if(e[s]===t[r]){n.push(e[s]);break}return n})(Se,t),s=[n[n.length-1]];t.length>n.length&&s.push(...((e,t)=>{const n=[];for(let s=e.length;s<t.length;s++)n.push(t[s]);return n})(n,t));let r,o=ye;for(let e=0;e<n.length;e++){if(r=n[e],r===s[0]){r=s.shift();break}o=o[r].children}for(;o[r]&&s.length;)o[r].action&&o[r].action(s.join("/"),we),o=o[r].children,r=s.shift();o[r]&&o[r].action&&o[r].action("/",we);Se=t}(t),ue.hash=t,ue.search=s?i(we):n,e.history[r](null,document.title,ue.toString())}function Ee(){ue.search=i(we),e.history.replaceState(null,document.title,ue.toString())}function Te(t){return 0===t.lastIndexOf("http",0)?e.location.href=t:Ce.navigate(t,{history:"replaceState",forceReload:!1})}function _e(e){if(he.indexOf(e)>-1)return{rel:"/",abs:le,hash:"#",query:""};if("?"===e[0]||"#"===e[0]){const{hash:t,query:n}=Ae(e);return{rel:Pe(t),abs:le+t,hash:t||"#",query:n}}if("?"!==(e=function(e){const t=(s=e,r=he,r.filter((e=>0===s.lastIndexOf(e,0))).sort(((e,t)=>t.length-e.length))[0]),n=t?e.substr(t.length):e;var s,r;return 0===n.lastIndexOf("/",0)?n.substr(1):n}(e))[0]&&"#"!==e[0])throw new Error('Invalid Route: "'+e+'". Non-root paths must start with ? query or # hash.');const{hash:t,query:n}=Ae(e);return{rel:Pe(t),abs:le+t,hash:t||"#",query:n}}function Ae(e){const t=e.indexOf("#"),n=e.indexOf("?");if(-1===t)return{hash:"",query:Ie(new URL(e,le).search)};if(-1===n)return{hash:Ie(new URL(e,le).hash),query:""};const s=new URL(e,le);if(n<t)return{hash:Ie(s.hash),query:Ie(s.search)};let r=s.hash;const o=r.slice(r.indexOf("?"));return r=r.replace(o,""),{hash:Ie(r),query:Ie(o)}}function Pe(e){return("#"===e?"/":e)||"/"}function Ie(e){return"/"===e[e.length-1]?e.substring(0,e.length-1):e}const Me={Component:ae,Store:q,Server:p,Router:Ce};"object"==typeof module&&"object"==typeof module.exports?module.exports=Me:"function"==typeof define&&define.amd?define("Cue",[],(function(){return Me})):e.Cue=Me}(window||this);